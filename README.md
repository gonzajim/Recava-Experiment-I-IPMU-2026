# **Self-refining Retrieval-Augmented Generation for legal question answering via ensemble-based Small Language Model feedback**

This repository hosts the experimental data and evaluation framework for **RECAV-AI**, a ensemble-based Small Language Model multi-agent system designed to optimize corporate sustainability reporting and legal compliance responses.

---

## **1. Experiment Results (Original in Spanish)**

The following section details the evolution of the 12 selected questions. Initial responses (Iteration 0) are compared against the final outputs following the refinement process.

| ID | Pregunta | Iters | Respuesta Inicial (Íntegra) | Respuesta Final (Íntegra) |
| :--- | :--- | :---: | :--- | :--- |
| **Q01** | ¿Qué consecuencias podría tener que un proveedor no cumpla la CSDDD en materia de trabajo forzoso? | 3 | <details><summary>Ver Respuesta Inicial</summary>La Directiva de Diligencia Debida Corporativa en Sostenibilidad (CSDDD, por sus siglas en inglés) establece un marco regulatorio robusto para asegurar que las empresas y sus cadenas de suministro cumplen con estándares elevados en materia de derechos humanos y medioambientales, incluyendo la erradicación del trabajo forzoso. En el supuesto de que un proveedor no cumpla con la CSDDD en materia de trabajo forzoso, varias consecuencias podrían surgir, tanto para el proveedor como para la empresa contratante. **1. Consecuencias Legales y Sanciones:** La no conformidad con la CSDDD puede acarrear sanciones administrativas y legales para la empresa que tiene la responsabilidad de diligencia debida sobre su cadena de suministro. Esto podría incluir multas significativas y la exigencia de adoptar medidas correctivas. Según los principios establecidos en la OCDE y las directrices europeas, el incumplimiento también podría dar lugar a investigaciones por parte de autoridades competentes. **2. Responsabilidad Civil:** Las empresas podrías enfrentarse a litigios civiles si el incumplimiento de la CSDDD por parte de un proveedor resulta en un daño que es atribuible a fallos en la diligencia debida de la empresa. Esto está alineado con las recomendaciones del GRI 101 que enfatizan la responsabilidad sobre los impactos identificados (por ejemplo, impactos negativos en derechos humanos como el trabajo forzoso). **3. Daño Reputacional:** Según el estándar ISO 26000 sobre Responsabilidad Social, el fracaso para abordar el trabajo forzoso dentro de la cadena de suministro puede resultar en un significativo daño reputacional. Este daño reputacional podría tener efectos negativos en la relación con inversores, clientes y otras partes interesadas clave, tal como delineado en los Estándares Universales GRI. **4. Medidas Contractuales y Operacionales:** Las empresas pueden recibir presión para reasignar o terminar contratos con proveedores incumplidores, conforme a las cláusulas contractuales de cumplimiento normativo y ético. Esto es consistente con las directrices de la OIT para asegurar lugares de trabajo dignos y justos. **5. Impactos en el Informe de Sostenibilidad:** La falta de conformidad impacta directamente en los informes de sostenibilidad, tal como lo podría exigir el GRI 409: Trabajo forzoso u obligatorio. Esto podría incluir la necesidad de divulgar la falta de adherencia a estándares internacionales y las medidas correctivas tomadas. **6. Acción Remediadora:** Según la CSDDD, las empresas deben emprender acciones remediadoras para rectificar situaciones de trabajo forzoso. Esto podría incluir inversiones en programas de capacitación del proveedor o en sistemas de monitoreo más sofisticados como parte del plan de cumplimiento y gestión de riesgos.</details> | <details><summary>Ver Respuesta Final</summary>La Directiva de Diligencia Debida Corporativa en Sostenibilidad (CSDDD) de la Unión Europea establece normas estrictas para asegurar que las empresas y sus cadenas de suministro operen en conformidad con los estándares de derechos humanos y medioambientales, incluyendo la erradicación del trabajo forzoso. El incumplimiento por parte de un proveedor de las disposiciones de la CSDDD en materia de trabajo forzoso puede tener varias implicaciones significativas. **1. Consecuencias Legales y Sanciones:** Un incumplimiento de la CSDDD por parte del proveedor puede resultar en sanciones administrativas y legales para la empresa matriz, la cual es responsable de llevar a cabo diligencia debida en su cadena de suministro. Tal como se establece en el artículo 20 de la Directiva, estas sanciones pueden incluir la imposición de multas cuantiosas, mandatos correctivos, e incluso restricciones operativas. Las autoridades competentes tienen el poder de llevar a cabo investigaciones conforme a lo estipulado en el artículo 23, lo que podría exacerbar las preocupaciones legales para la empresa. **2. Responsabilidad Civil:** El posible incumplimiento puede derivar en acciones legales civiles si se demuestra que hubo perjuicios causados por fallas en la diligencia debida de la empresa. Esto está alineado con las directrices de la OCDE sobre responsabilidades relacionadas con cadenas de suministro, y enfatizado por el Estándar GRI 101, que destaca la obligación de gestionar impactos adversos en los derechos humanos, como el trabajo forzoso. **3. Daño Reputacional:** De acuerdo con la norma ISO 26000 sobre Responsabilidad Social, la inacción ante el trabajo forzoso en la cadena de suministro puede tener un impacto devastador en la reputación de una empresa. La afectación de la imagen corporativa tiene repercusiones en las relaciones con inversores, clientes y otras partes interesadas, un tema también tratado en los Estándares Universales GRI relativos a la comunicación efectiva y la integridad corporativa. **4. Medidas Contractuales y Operacionales:** Las empresas podrían rescindir contratos con proveedores que no cumplan, según las cláusulas de cumplimiento contractual de sus acuerdos de suministro, en conformidad con las directrices de la Organización Internacional del Trabajo (OIT) para promover prácticas laborales justas. Estas medidas son críticas para la mitigación eficaz de riesgos futuros relacionados con el cumplimiento normativo. **5. Impactos en Informes de Sostenibilidad:** El incumplimiento afecta de manera adversa los informes de sostenibilidad, particularmente bajo el Estándar GRI 409, que requiere la divulgación completa de situaciones y acciones correctivas relacionadas con el trabajo forzoso. La transparencia en estos informes es esencial para mantener la credibilidad en materia de sostenibilidad corporativa. **6. Acción Remediadora:** La CSDDD obliga a las empresas a tomar acciones correctivas para remediar situaciones de trabajo forzoso. Esto puede requerir el desarrollo de programas de capacitación para el proveedor o la implementación de sistemas de monitoreo sólidos, alineados con el estándar ISO 37001 para la gestión de riesgos legales. Para afrontar estos desafíos adecuadamente, las empresas deben ser proactivas en la evaluación de la capacidad de sus proveedores para cumplir con la CSDDD, mediante auditorías sistemáticas y el fortalecimiento de sus mecanismos de monitoreo conforme a estándares internacionales y el Principio 31 de los Principios Rectores de la ONU sobre Empresas y Derechos Humanos. Asimismo, es esencial disponer de mecanismos de reclamación eficientes, como mediación y arbitraje imparciales, para la resolución de conflictos, asegurando así un enfoque eficaz y sostenible para gestionar riesgos de trabajo forzoso en las cadenas de suministro.</details> |
| **Q02** | ¿Qué iniciativas de economía circular promueve la UE y cómo puedo aplicarlas en la fabricación de electrónicos? | 2 | <details><summary>Ver Respuesta Inicial</summary>La Unión Europea ha desarrollado varias iniciativas y legislaciones para promover la economía circular, enfocándose en la conservación de recursos y la reducción de residuos. Entre las iniciativas clave se encuentra el Plan de Acción para la Economía Circular, que es parte integral del Pacto Verde Europeo. Para aplicar estas iniciativas en la fabricación de electrónicos, se pueden considerar estrategias como Ecodiseño, Preparación para la Reutilización y Responsabilidad Ampliada del Productor (RAP)...</details> | <details><summary>Ver Respuesta Final</summary>La UE ha establecido un marco robusto para promover la economía circular, especialmente en la fabricación de electrónicos, un sector priorizado por el Plan de Acción de Economía Circular (CEAP). Se aplican estrategias de Ecodiseño bajo el Reglamento (UE) 2019/2021, fomentando la durabilidad y reparabilidad. Asimismo, la Directiva RAEE (2012/19/UE) regula la gestión de residuos para recuperar materias primas críticas...</details> |
| **Q03** | ¿Qué beneficios ofrece el EMAS en el contexto del Pacto Verde Europeo? | 2 | <details><summary>Ver Respuesta Inicial</summary>El Eco-Management and Audit Scheme (EMAS) ofrece beneficios significativos en el contexto del Pacto Verde Europeo, alineándose con sus objetivos de sostenibilidad, descarbonización y protección del medio ambiente. Permite a las organizaciones gestionar su impacto ambiental de manera sistemática, mejorando el desempeño, asegurando el cumplimiento legal y aumentando la transparencia a través de la declaración ambiental validada.</details> | <details><summary>Ver Respuesta Final</summary>EMAS actúa como una herramienta estratégica para cumplir con las metas del Pacto Verde Europeo. Además de la mejora del desempeño ambiental sistemático, proporciona una ventaja competitiva al alinearse con la Taxonomía de la UE y facilitar el acceso a financiación sostenible. Su enfoque en la mejora continua y el rigor de la verificación externa lo distingue de la norma ISO 14001 al exigir una declaración ambiental pública y validada.</details> |
| **Q04** | ¿Cómo se realiza un mapa de riesgos de derechos humanos en la cadena de suministro para cumplir la CSDDD? | 2 | <details><summary>Ver Respuesta Inicial</summary>Comienza con la identificación de todos los actores en la cadena, desde proveedores directos a subcontratistas. Evalúa riesgos inherentes mediante cuestionarios y auditorías iniciales, analizando el contexto geográfico y sectorial para detectar posibles vulnerabilidades en derechos laborales.</details> | <details><summary>Ver Respuesta Final</summary>El mapeo de riesgos bajo CSDDD requiere un enfoque metodológico robusto basado en las Directrices de la OCDE. El proceso incluye: 1. Identificación de áreas de impacto adverso en toda la cadena de valor. 2. Evaluación de severidad y probabilidad de los riesgos identificados. 3. Priorización basada en el alcance y la irreversibilidad del impacto. 4. Integración activa de la voz de los stakeholders (titulares de derechos) para validar la matriz de riesgos y asegurar la transparencia del proceso de debida diligencia.</details> |
| **Q05** | ¿Podrías darme un ejemplo de cuestionario de auditoría social para proveedores de calzado, alineado con la CSDDD? | 7 | <details><summary>Ver Respuesta Inicial</summary>Presento un ejemplo alineado con los Principios Rectores de la ONU e ISO 26000. Incluye secciones sobre Derechos Humanos (salarios, horas extra), Salud y Seguridad, y Prácticas Laborales generales para evaluar la conformidad del proveedor en el sector del calzado.</details> | <details><summary>Ver Respuesta Final</summary>Cuestionario técnico exhaustivo estructurado por bloques críticos: 1. Gobernanza y Políticas (compromiso con DDHH). 2. Condiciones Laborales (cumplimiento de convenios OIT, prohibición de trabajo infantil y forzoso). 3. Seguridad y Salud Ocupacional (gestión de riesgos, EPIs). 4. Gestión Medioambiental (uso de químicos bajo REACH y gestión de residuos). 5. Ética Empresarial (anticorrupción y canales de denuncia anónimos). Este instrumento garantiza la trazabilidad normativa exigida por la CSDDD y los estándares ESRS.</details> |
| **Q06** | ¿Qué son los parámetros ESG y cómo integrarlos en mi informe CSRD? | 2 | <details><summary>Ver Respuesta Inicial</summary>Los parámetros ESG (Environmental, Social, and Governance) son criterios utilizados para evaluar el desempeño sostenible de una organización. Se integran en el informe mediante el análisis de materialidad, recopilación de datos de impacto y reporte transparente siguiendo las directrices de la Directiva de Información de Sostenibilidad.</details> | <details><summary>Ver Respuesta Final</summary>Los parámetros ESG constituyen el núcleo operativo de la CSRD. Su integración efectiva requiere: 1. Aplicación del principio de **Doble Materialidad** (impacto ambiental/social y relevancia financiera). 2. Uso obligatorio de los estándares **ESRS** (European Sustainability Reporting Standards). 3. Alineación de KPIs sociales y de gobernanza con los marcos GRI y los ODS de la ONU para asegurar la comparabilidad y el rigor en la verificación externa obligatoria.</details> |
| **Q07** | ¿Qué pasos debo seguir para analizar la huella de plástico en mi línea de productos alimentarios según la UE? | 4 | <details><summary>Ver Respuesta Inicial</summary>Para analizar la huella de plástico, debes definir el alcance del producto, recolectar datos sobre plásticos vírgenes y reciclados utilizados, realizar un análisis de ciclo de vida (LCA) básico y proponer estrategias de reducción alineadas con la normativa europea.</details> | <details><summary>Ver Respuesta Final</summary>El análisis debe ejecutarse bajo un enfoque exhaustivo basado en la norma ISO 14044 (LCA). Los pasos críticos son: 1. Definición de límites del sistema (cuna a tumba). 2. Inventario detallado por polímero y formato de envase. 3. Evaluación de impacto ambiental y toxicidad. 4. Alineación con la Directiva de Plásticos de un Solo Uso (SUP) y el Reglamento de Envases. 5. Publicación de resultados bajo el estándar GRI 306 para garantizar la transparencia ante reguladores y consumidores.</details> |
| **Q08** | ¿Cuáles son los riesgos de no respetar la legislación local sobre igualdad de género en la contratación, según la CSRD? | 5 | <details><summary>Ver Respuesta Inicial</summary>La Directiva sobre la divulgación de información corporativa sobre sostenibilidad (CSRD) tiene como objetivo mejorar y ampliar las obligaciones de divulgación de sostenibilidad para las empresas. El incumplimiento conlleva riesgos legales, sanciones financieras locales y un posible impacto negativo en la reputación corporativa por falta de equidad.</details> | <details><summary>Ver Respuesta Final</summary>Bajo la CSRD, el incumplimiento se expone públicamente a través del estándar ESRS S1 (Propia fuerza de trabajo). Los riesgos se categorizan en: 1. **Legales**: Sanciones administrativas y multas por violación de leyes de igualdad nacionales. 2. **Financieros**: Exclusión de fondos de inversión ESG y licitaciones públicas. 3. **Reputacionales**: Daño a la marca empleadora y pérdida de confianza de los stakeholders. 4. **Operativos**: Brechas salariales no justificadas que deben reportarse obligatoriamente, afectando la competitividad y la retención de talento.</details> |
| **Q09** | ¿Qué pasos se requieren para que mi empresa logre una certificación de comercio justo que sea reconocida en la UE? | 1 | <details><summary>Ver Respuesta Inicial</summary>Para lograr una certificación de comercio justo reconocida en la UE, los pasos esenciales incluyen: 1. Selección del organismo certificador (Fairtrade International, WFTO). 2. Autoevaluación preliminar basada en ISO 26000. 3. Implementación de estándares sociales y económicos. 4. Auditoría externa por parte del organismo seleccionado. 5. Obtención del sello y mantenimiento mediante monitoreo continuo.</details> | <details><summary>Ver Respuesta Final</summary>(La respuesta inicial fue validada como óptima en la Iteración 0 debido a su precisión técnica y claridad procedimental).</details> |
| **Q10** | Mi organización busca la neutralidad en la huella de carbono. ¿Qué directrices europeas y marcos GRI recomiendas seguir? | 1 | <details><summary>Ver Respuesta Inicial</summary>Para la neutralidad de carbono, se recomienda seguir el Pacto Verde Europeo como marco estratégico, el Reglamento de Taxonomía de la UE (2020/852) para la clasificación de actividades sostenibles, y los estándares GRI 302 (Energía) y GRI 305 (Emisiones) para el reporte técnico del inventario de GEI y planes de mitigación.</details> | <details><summary>Ver Respuesta Final</summary>(La respuesta inicial fue validada como óptima en la Iteración 0 al cubrir íntegramente el nexo entre estrategia europea y reporte técnico GRI).</details> |
| **Q11** | ¿Podrías detallar qué es la propuesta de Directiva de Debida Diligencia alemana y cómo se alinea con la CSDDD? | 1 | <details><summary>Ver Respuesta Inicial</summary>La ley alemana de debida diligencia (LkSG) impone obligaciones a las empresas sobre sus cadenas de suministro desde 2023. Se alinea con la CSDDD europea en la exigencia de identificar y mitigar riesgos de DDHH, aunque la CSDDD tiene un alcance más amplio, incluye el sector financiero y establece una responsabilidad civil que la ley alemana actual no contempla con tanta severidad.</details> | <details><summary>Ver Respuesta Final</summary>(La respuesta inicial fue validada como óptima al realizar un análisis comparativo preciso entre el marco nacional alemán LkSG y el supraestatal CSDDD).</details> |
| **Q12** | ¿Cómo reducir las emisiones de gases de efecto invernadero en el sector agrícola siguiendo la normativa europea? | 2 | <details><summary>Ver Respuesta Inicial</summary>Reducir las emisiones en agricultura requiere implementar prácticas de agricultura regenerativa, gestionar eficientemente los fertilizantes nitrogenados según el Reglamento 2019/1009 y optimizar el uso del suelo bajo los planes estratégicos de la PAC 2021/2115.</details> | <details><summary>Ver Respuesta Final</summary>La estrategia debe integrarse en la arquitectura verde de la PAC. Las acciones clave incluyen: 1. Cumplimiento de la Directiva de Nitratos (91/676/CEE) para reducir el óxido nitroso. 2. Implementación de eco-esquemas para la captura de carbono en suelos. 3. Alineación con la Estrategia "De la Granja a la Mesa" para reducir la huella de metano entérico y mejorar la biodiversidad, garantizando un reporte transparente bajo los estándares sectoriales de la CSRD.</details> |

---

## **2. Visual Evolution Analysis**

The following chart illustrates the performance optimization path for each research question across the iterative process. The scores represent the final quality aggregation using the Choquet integral.



![Score Evolution](recava_12_q_evolution_plot.png)

---

## **3. Evaluation Criteria**

The quality assessment of the responses is performed by a specialized ensemble-based Small Language adversarial models using the following criteria. Each dimension accounts for **20%** of the final aggregated score through a **Choquet integral**, which ensures that excellence in one area does not mask significant failures in another.

#### **Weight Scale Reference:**
* **Very High:** 0.9
* **High:** 0.7
* **Medium:** 0.5
* **Low:** 0.3
* **Very Low:** 0.1

---

#### **C1: Clear and Hierarchical Information Structure**
**Overall Criterion Weight: High (0.7)** *Description: Information must be organized in a structure that facilitates understanding, prioritizing fundamental elements and using a logical hierarchy.*

* **Aspects included:**
    1. Dividing the response into clear sections using headers, subheadings, and hierarchical lists. (**Very High - 0.9**)
    2. Prioritizing information based on relevance to the user (e.g., highlighting known or effective options first). (**High - 0.7**)
    3. Including illustrative examples to clarify or deepen complex concepts. (**Medium - 0.5**)
    4. Providing an initial introduction or summary that clarifies the objective and scope. (**Low - 0.3**)
    5. Maintaining consistent formatting (spacing, bullets, numbering) for visual distinction. (**Low - 0.3**)

#### **C2: Precision, Relevance, and Contextual Adequacy**
**Overall Criterion Weight: Very High (0.9)** *Description: Responses must be technical and precise but adapted to the user profile, offering useful, relevant, and directly applicable information. Specific regulations must be cited faithfully without mixing them with unrelated ones.*

* **Aspects included:**
    1. Adapting language and level of detail according to the query type and user profile. (**Low - 0.3**)
    2. Including essential information without excessive technical jargon. (**Low - 0.3**)
    3. Contextualizing the response, highlighting applicability to different sectors or company sizes. (**High - 0.7**)
    4. Maintaining fidelity to the requested regulation, describing content exactly without mixing unrelated rules. (**Very High - 0.9**)
    5. Avoiding inconsistencies or contradictions, ensuring a coherent message throughout. (**Very High - 0.9**)

#### **C3: Practical and Decision-Oriented Approach**
**Overall Criterion Weight: Medium (0.5)** *Description: Responses must include recommendations, advantages, disadvantages, and clear steps to facilitate the real-world application of the information.*

* **Aspects included:**
    1. Including concrete recommendations (e.g., "Ideal for companies that..."). (**High - 0.7**)
    2. Highlighting advantages and disadvantages for informed decision-making. (**Low - 0.3**)
    3. Providing concrete steps to implement measures or comply with requirements. (**Very High - 0.9**)
    4. Suggesting indicators or metrics to evaluate effectiveness and impact. (**High - 0.7**)
    5. Highlighting best practices or proven strategies to facilitate adoption. (**Very Low - 0.1**)

#### **C4: Essential References and Additional Resources**
**Overall Criterion Weight: Medium (0.5)** *Description: Responses must cite relevant sources, useful links, or regulations to back up information and allow the user to go deeper into the topic.*

* **Aspects included:**
    1. Providing links to official sources, practical guides, or recognized tools. (**Very Low - 0.1**)
    2. Mentioning legal frameworks or international standards that back the information. (**Very High - 0.9**)
    3. Incorporating specific guides or methodologies for complex technical topics. (**Medium - 0.5**)
    4. Connecting with renowned institutions or experts in the field. (**Medium - 0.5**)
    5. Ensuring references are up-to-date, indicating dates or versions when relevant. (**High - 0.7**)

#### **C5: Temporal Clarity and Resource Management**
**Overall Criterion Weight: Low (0.3)** *Description: Responses must offer clear information regarding estimated timelines, approximate costs, and necessary resources to implement proposed actions.*

* **Aspects included:**
    1. Indicating time estimations (e.g., "This process usually takes..."). (**Low - 0.3**)
    2. Providing approximate cost information when possible. (**Very Low - 0.1**)
    3. Highlighting additional resources (specialized staff, technology) required. (**Medium - 0.5**)
    4. Specifying legal deadlines or timeframes. (**Very High - 0.9**)
    5. Suggesting monitoring and control mechanisms. (**High - 0.7**)

---

---

## **4. Technical Implementation**

The RECAV-AI engine utilizes a combination of RAG (Retrieval-Augmented Generation) and iterative feedback loops. Evaluation is conducted by three distinct LLM personalities:
1. **DeepSeek-R1 (Adversarial Critic):** Focuses on finding flaws in logic and legal gaps.
2. **Mistral-Claude (Technical Architect):** Evaluates structural depth and professional utility.
3. **Gemma (Normative Guardian):** Ensures strict adherence to EU regulatory language.

---
